(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e){e.exports={canvas:{width:640,height:320},routes:{100:[[100,100],[540,100],[540,220]],110:[[100,100],[540,100],[540,220]]}}},31:function(e,t,n){e.exports=n(66)},61:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(11),c=n.n(i),o=n(10),l=n.n(o),s=n(12),u=n(3),p=n(4),h=n(6),m=n(5),d=n(7),f=n(13),b=n(8),v=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderInfoText",value:function(e){return e?r.a.createElement(b.c,null,e):null}},{key:"renderActionButton",value:function(e,t){return e?r.a.createElement(b.a,{className:"mt-1 btn-block",size:"lg",color:"primary",onClick:t},e):null}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.infoText,a=e.actionButtonText,i=e.onAction,c=e.children;return r.a.createElement("div",{className:"christmas-card"},r.a.createElement(b.b,{body:!0,className:"card text-white bg-secondary text-center"},r.a.createElement(b.d,null,t),this.renderInfoText(n),c,this.renderActionButton(a,i)))}}]),t}(a.Component),E=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,n=e.onHintRequested;return r.a.createElement("div",{className:"mb-4 text-center"},r.a.createElement(b.a,{className:"w-50",size:"sm",color:"info",onClick:n,disabled:t},"Give me a hint!"))}}]),t}(a.Component),O=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.isVisible?"visible":"invisible";return r.a.createElement("a",{className:n,target:"_blank",rel:"noopener noreferrer",href:t},r.a.createElement("span",{class:"badge badge-info"},"Hint"))}}]),t}(a.Component),k=n(27),C=n(28),j="https://hapi.fhir.org/baseDstu3",y={Patient:"Patient",Practitioner:"Practitioner",Location:"Location",Appointment:"Appointment"},N="555555-555";function g(e,t){return t.participant.find(function(t){return t.actor.reference.includes(e)})}function w(e){return e.actor.display}function I(e){var t=e.actor.reference;return"".concat(j,"/").concat(t)}var _=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={id:""},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.isLoading,r=t.onCheckIn;a||r(n.state.id)},n.handleIdChange=function(e){n.setState({id:e.target.value})},n.handleHintRequested=function(){var e=n.props,t=e.hintLevel,a=e.onHintRequested;t>0&&n.setState({id:N}),a()},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderCard",value:function(){var e=this.state.id,t=this.props.isLoading;return r.a.createElement(v,{title:r.a.createElement("span",null,"Check-in"),infoText:r.a.createElement("span",null,"Please type in your ID")},this.renderHint(),r.a.createElement(b.e,{onSubmit:this.handleSubmit},r.a.createElement(b.f,null,r.a.createElement(b.g,{bsSize:"lg",value:e,onChange:this.handleIdChange,className:"text-center"}),r.a.createElement("button",{className:"btn btn-primary btn-lg mt-1 btn-block",type:"submit",disabled:!e},t?r.a.createElement(k.a,{icon:C.a,spin:!0}):"Check in"))))}},{key:"renderHint",value:function(){var e,t=this.props.hintLevel;return r.a.createElement(O,{isVisible:t>0,url:(e="Joulupukki","".concat(j,"/").concat(y.Patient,"?name=").concat(e))})}},{key:"render",value:function(){var e=this.props.hintLevel;return r.a.createElement("div",{className:"check-in"},r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{class:"alert alert-info"},r.a.createElement("strong",null,"Santa Claus is ill!")," Please help Santa to check-in for an appointment.")),r.a.createElement(E,{onHintRequested:this.handleHintRequested,isDisabled:e>=2}),this.renderCard())}}]),t}(a.Component),x=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.onClose;return r.a.createElement("div",null,r.a.createElement(v,{title:r.a.createElement("span",null,"Appointment was not found"),infoText:r.a.createElement("span",null,"Please contact the reception."),actionButtonText:"Close",onAction:e}))}}]),t}(a.Component),T=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderParticipant",value:function(e,t,n,a){var i=g(e,n);return i?r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,w(i)),r.a.createElement("td",null,r.a.createElement(O,{isVisible:a,url:I(i)}))):null}},{key:"renderPatient",value:function(e,t){return this.renderParticipant(y.Patient,"Customer",e,t)}},{key:"renderPractitioner",value:function(e,t){return this.renderParticipant(y.Practitioner,"Practitioner",e,t)}},{key:"renderLocation",value:function(e,t,n){var a=g(y.Location,e);return a?r.a.createElement("tr",null,r.a.createElement("td",null,"Location"),r.a.createElement("td",null,w(a)),r.a.createElement("td",null,r.a.createElement(b.a,{className:t?"visible":"invisible",size:"sm",color:"info",onClick:n},"Map"))):null}},{key:"renderTime",value:function(e){return e&&e.start?r.a.createElement("tr",null,r.a.createElement("td",null,"Time"),r.a.createElement("td",null,e.start.toLocaleString()),r.a.createElement("td",null)):null}},{key:"render",value:function(){var e,t,n=this.props,a=n.appointment,i=n.hintLevel,c=n.onClose,o=n.onShowDirections,l=n.onHintRequested;return r.a.createElement("div",{className:"appointment-guide"},r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{class:"alert alert-info"},"Where is the appointment? Who is the practitioner? Can you find out why Santa Claus is ill?")),r.a.createElement(E,{onHintRequested:l,isDisabled:i>=4}),r.a.createElement(v,{title:r.a.createElement("span",null,"Appointment"),infoText:r.a.createElement("span",null,a?r.a.createElement(O,{isVisible:i>3,url:(e=y.Appointment,t=a.id,"".concat(j,"/").concat(e,"/").concat(t))}):null),actionButtonText:"Close",onAction:c},r.a.createElement("div",{className:"responsive-table"},r.a.createElement("table",{className:"table text-left"},r.a.createElement("tbody",null,this.renderPatient(a,i>2),this.renderTime(a),this.renderPractitioner(a,i>1),this.renderLocation(a,i>0,o))))))}}]),t}(a.Component),H=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.center,t=[e[0]-200,e[1]-200],n="translate(".concat(t[0]," ").concat(t[1],")");return r.a.createElement("path",{transform:n,strokeWidth:"2",fill:"none",stroke:"#007bff",d:"M200 200 S 200.5 200 200.9 200.1 201.3 200.3 201.8 200.5 202.1 200.8 202.5 201.1 202.8 201.5 203.1 202 203.3 202.5 203.4 203 203.5 203.6 203.6 204.2 203.5 204.8 203.4 205.4 203.2 206 203 206.7 202.7 207.3 202.3 207.9 201.8 208.5 201.2 209.1 200.6 209.6 199.9 210.1 199.2 210.5 198.3 210.8 197.5 211.1 196.5 211.4 195.6 211.5 194.6 211.6 193.5 211.6 192.4 211.4 191.4 211.2 190.3 210.9 189.2 210.5 188.1 210 187.1 209.4 186 208.7 185 207.9 184.1 207 183.2 206 182.4 204.9 181.6 203.7 181 202.4 180.4 201.1 179.9 199.6 179.5 198.2 179.2 196.6 179.1 195 179.1 193.4 179.2 191.8 179.4 190.1 179.8 188.4 180.3 186.7 180.9 185.1 181.7 183.4 182.6 181.8 183.7 180.3 184.9 178.8 186.2 177.4 187.6 176 189.2 174.8 190.9 173.6 192.7 172.6 194.6 171.7 196.6 170.9 198.7 170.3 200.8 169.8 203 169.5 205.3 169.4 207.6 169.4 209.9 169.6 212.2 169.9 214.5 170.5 216.9 171.2 219.1 172.1 221.4 173.2 223.6 174.5 225.7 175.9 227.7 177.5 229.6 179.3 231.4 181.2 233.1 183.3 234.6 185.6 236 188 237.2 190.5 238.2 193.1 239.1 195.8 239.7 198.6 240.2 201.4 240.4 204.4 240.5 207.3 240.3 210.3 239.9 213.4 239.2 216.4 238.4 219.3 237.3 222.3 236 225.2 234.4 228 232.7 230.7 230.7 233.3 228.5 235.7 226.1 238.1 223.6 240.2 220.8 242.2 217.9 244 214.8 245.7 211.6 247 208.3 248.2 204.9 249.1 201.3 249.8 197.7 250.2 194.1 250.4 190.4 250.3 186.7 249.9 183 249.3 179.3 248.3 175.7 247.1 172.2 245.7 168.7 243.9 165.3 241.9 162.1 239.7 159 237.1 156.1 234.4 153.4 231.4 150.8 228.2 148.5 224.8 146.4 221.2 144.6 217.4 143.1 213.5 141.8 209.5 140.8 205.3 140.1 201.1 139.7 196.8 139.7 192.4 139.9 188 140.5 183.6 141.4 179.2 142.6 174.9 144.2 170.6 146 166.4 148.2 162.4 150.7 158.5 153.5 154.7 156.5 151.2 159.9 147.8 163.5 144.7 167.3 141.8 171.4 139.2 175.7 136.9 180.1 134.9 184.7 133.1 189.5 131.8 194.4 130.7 199.4 130.1 204.4 129.7 209.5 129.8 214.6 130.2 219.7 131 224.8 132.2 229.8 133.7 234.7 135.6 239.4 137.9 244.1 140.5 248.5 143.4 252.8 146.7 256.8 150.4 260.6 154.3 264.1 158.5 267.3 163 270.2 167.7 272.8 172.7 275 177.9 276.8 183.2 278.3 188.7 279.3 194.3 280 200 280.2 205.8 280.1 211.6 279.5 217.4 278.5 223.2 277 228.9 275.2 234.6 272.9 240.1 270.2 245.5 267.2 250.7 263.7 255.6 259.9 260.4 255.7 264.9 251.1 269.1 246.3 272.9 241.2 276.5 235.8 279.7 230.1 282.4 224.2 284.8 218.2 286.8 212 288.3 205.6 289.4 199.2 290.1 192.7 290.2 186.2 289.9 179.7 289.1 173.2 287.9 166.8 286.2 160.5 284 154.3 281.3 148.4 278.2 142.6 274.7 137.1 270.7 131.9 266.3 126.9 261.6 122.3 256.4 118.1 251 114.2 245.2 110.8 239.1 107.8 232.7 105.3 226.1 103.2 219.4 101.6 212.4 100.5 205.4 99.9 198.2 99.8 191 100.3 183.7 101.3 176.5 102.8 169.4 104.8 162.3 107.3 155.4 110.4 148.6 113.9 142.1 117.9 135.7 122.4 129.7 127.3 124 132.7 118.6 138.4 113.6 144.6 109.1 151 104.9 157.8 101.2 164.8 98 172.1 95.3 179.6 93.1 187.3 91.5 195.1 90.4 203 89.9 210.9 89.9 218.9 90.5 226.8 91.7 234.6 93.5 242.3 95.8 249.9 98.7 257.3 102.2 264.4 106.1 271.3 110.6 277.8 115.7 284 121.1 289.8 127.1 295.1 133.4 300.1 140.2 304.5 147.3 308.4 154.8 311.8 162.5 314.7 170.6 316.9 178.8 318.6 187.2 319.7 195.7 320.2 204.3 320 213 319.2 221.6 317.8 230.2 315.7 238.8 313.1 247.1 309.8 255.3 306 263.3 301.5 271 296.5 278.4 291 285.4 284.9 292.1 278.4 298.3 271.4 304 264 309.3 256.2 314 248 318.2 239.6 321.7 230.8 324.7 221.9 327 212.8 328.7 203.5 329.8 194.2 330.2 184.8 329.9 175.4 328.9 166.1 327.2 156.9 324.9 147.9 321.9 139.1 318.3 130.5 314 122.2 309.1 114.3 303.6 106.8 297.5 99.7 290.8 93.1 283.7 87 276.1 81.4 268 76.4 259.5 72.1 250.7 68.3 241.5 65.2 232 62.8 222.4 61.1 212.5 60.1 202.5 59.9 192.4 60.3 182.4 61.5 172.3 63.4 162.3 66 152.4 69.4 142.8 73.4 133.3 78.1 124.2 83.5 115.4 89.5 106.9 96.2 98.9 103.4 91.4 111.1 84.4 119.4 77.9 128.2 72 137.3 66.8 146.9 62.2 156.8 58.3 166.9 55.2 177.3 52.7 187.9 51 198.7 50.1 209.4 49.9 220.3 50.5 231 51.9 241.7 54.1 252.2 57 262.5 60.7 272.6 65.1 282.3 70.3 291.7 76.2 300.6 82.7 309.1 89.9 317 97.7 324.4 106.1 331.2 115 337.4 124.5 342.9 134.3 347.7 144.6 351.7 155.2 355 166.1 357.4 177.2 359.1 188.6 359.1 188.6"})}}]),t}(a.Component),P=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.infoText,a=e.config,i=e.onBack,c=a.canvas,o=c.width,l=c.height,s=[.5*o,.5*l];return r.a.createElement("div",{className:"guide"},r.a.createElement(v,{title:t,infoText:n,actionButtonText:"Back",onAction:i},r.a.createElement("svg",{viewBox:"0 0 ".concat(o," ").concat(l)},r.a.createElement(H,{center:s}))))}}]),t}(a.Component),S=n(29),A={CHECK_IN:"CHECK_IN",APPOINTMENT_NOT_FOUND:"APPOINTMENT_NOT_FOUND",CHECKED_IN:"CHECKED_IN",CHECKED_IN_MAP:"CHECKED_IN_MAP"},L=function(e){function t(){var e,n;return Object(u.a)(this,t),(n=Object(h.a)(this,Object(m.a)(t).call(this))).state={hintLevel:0},n.handleHint=function(){var e=n.state.hintLevel;n.setState({hintLevel:e+1})},n.handleCheckIn=function(e){n.setState({hintLevel:0}),(0,n.props.onCheckIn)(e)},n.handleClose=function(){n.setState({hintLevel:0}),(0,n.props.onClose)()},n.renderCheckIn=function(){var e=n.props.isLoading,t=n.state.hintLevel;return r.a.createElement(_,{isLoading:e,hintLevel:t,onCheckIn:n.handleCheckIn,onHintRequested:n.handleHint})},n.renderAppointmentNotFound=function(){return r.a.createElement(x,{onClose:n.handleClose})},n.renderAppointment=function(){var e=n.props,t=e.appointment,a=e.onShowMap,i=n.state.hintLevel;return r.a.createElement(T,{appointment:t,hintLevel:i,onClose:n.handleClose,onShowDirections:a,onHintRequested:n.handleHint})},n.renderMap=function(){var e=n.props.onCloseMap;return r.a.createElement("div",null,r.a.createElement("div",{class:"alert alert-info"},"Did you know that Santa Claus' original home lies in the mysterious Korvatunturi, in Finland? Of course, the exact location is a secret only known to a chosen few."),r.a.createElement(P,{title:r.a.createElement("span",null,"Location"),config:S,onBack:e}))},n.STATUS_TO_RENDERER=(e={},Object(f.a)(e,A.CHECK_IN,n.renderCheckIn),Object(f.a)(e,A.APPOINTMENT_NOT_FOUND,n.renderAppointmentNotFound),Object(f.a)(e,A.CHECKED_IN,n.renderAppointment),Object(f.a)(e,A.CHECKED_IN_MAP,n.renderMap),e),n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"renderComponent",value:function(){var e=this.props.status,t=this.STATUS_TO_RENDERER[e];if(!t)throw new Error("Invalid status ".concat(e));return t()}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderComponent())}}]),t}(a.Component),D=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-dark bg-primary"},r.a.createElement("div",{className:"navbar-header"},r.a.createElement("a",{className:"navbar-brand",href:"https://akalliokoski.github.io/christmas-on-fhir"},"Christmas on FHIR")),r.a.createElement("ul",{class:"navbar-nav"},r.a.createElement("li",{class:"nav-item"},r.a.createElement("a",{className:"nav-link",target:"_blank",rel:"noopener noreferrer",href:"https://github.com/akalliokoski/christmas-on-fhir"},"Github"))))}}]),t}(a.Component),M=function(e){function t(){return Object(u.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",{className:"mastfoot mt-auto"},r.a.createElement("div",{className:"inner"},r.a.createElement("div",null,"Made by"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.linkedin.com/in/akalliokoski/"},"akalliokoski")),r.a.createElement("div",null,"Sponsored by"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.codeo.fi"},"Codeo")),r.a.createElement("div",null,"Powered by"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.hl7.org/fhir/"},"FHIR"),r.a.createElement("span",null," and "),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://hapi.fhir.org/"},"HAPI-FHIR Test Server"))))}}]),t}(a.Component),R=n(30),K=n.n(R);function B(e){return F.apply(this,arguments)}function F(){return(F=Object(s.a)(l.a.mark(function e(t){var n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.get(t).catch(function(e){return console.log("Failed to find resource ".concat(t)),null});case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return a=n.data.entry||[],e.abrupt("return",1===a.length?a[0].resource:null);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(e){return U.apply(this,arguments)}function U(){return(U=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(j,"/").concat(y.Patient,"?identifier=").concat(t),e.abrupt("return",B(n));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function W(e){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(j,"/").concat(y.Appointment,"?patient=").concat(t),e.abrupt("return",B(n));case 2:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function V(e){return J.apply(this,arguments)}function J(){return(J=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t);case 2:if(n=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,W(n.id);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var G={status:A.CHECK_IN,isLoading:!1,appointment:null},$=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=G,n.handleCheckIn=function(){var e=Object(s.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.next=3,V(t);case 3:a=e.sent,n.setState({status:a?A.CHECKED_IN:A.APPOINTMENT_NOT_FOUND,appointment:a,isLoading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleShowMap=function(){n.setState({status:A.CHECKED_IN_MAP})},n.handleCloseMap=function(){n.setState({status:A.CHECKED_IN})},n.reset=function(){n.setState(G)},n}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App cover-container d-flex w-100 h-100 p-3 mx-auto flex-column"},r.a.createElement(D,null),r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"my-2"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://hapi.fhir.org/"},r.a.createElement("span",{class:"badge badge-primary"},"Use the power of FHIR"))),r.a.createElement(L,Object.assign({className:"lead"},this.state,{onCheckIn:this.handleCheckIn,onClose:this.reset,onShowMap:this.handleShowMap,onCloseMap:this.handleCloseMap}))),r.a.createElement(M,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(59),n(61),n(64);c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.3f649365.chunk.js.map